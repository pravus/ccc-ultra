#!/bin/bash

/usr/bin/docker stop ccc-ultra
/usr/bin/docker rm ccc-ultra
exec /usr/bin/docker run "$@" \
  --rm \
  --name ccc-ultra \
  --hostname www.carbon.cc \
  --network www \
  --volume /opt/ccc/srv/www:/www:ro \
  --volume /opt/ccc/etc/ssl/carbon.cc/fullchain.pem:/tls/cert:ro \
  --volume /opt/ccc/etc/ssl/carbon.cc/privkey.pem:/tls/key:ro \
  ccc-ultra:latest \
    -http=:8080 \
    -https=:8443 \
    -https-tls-cert=/tls/cert \
    -https-tls-key=/tls/key \
    -root=/www/index.html \
    -favicon-ico=/www/favicon.ico \
    -prometheus
